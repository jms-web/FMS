USE [FMS]
GO

/****** Object:  View [dbo].[VWM106_BUHIN]    Script Date: 2018/05/30 12:17:43 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO





ALTER VIEW [dbo].[VWM106_BUHIN]
AS
SELECT
 M106.[BUMON_KB]
,M106.[TOKUI_ID]
,(SELECT TORI_NAME FROM M101_TORIHIKI AS M101 WHERE(M101.TORI_ID = M106.[TOKUI_ID])) AS TORI_NAME
,M106.[BUHIN_BANGO]
,M106.[SYANAI_CD]
,M106.[BUHIN_NAME]
,M106.[KEIYAKU_KB]
,isnull((SELECT ITEM_DISP FROM M001_SETTING AS M001 WHERE(M001.ITEM_NAME = 'ŽÐˆõ‹æ•ª' AND M001.ITEM_VALUE = M106.[KEIYAKU_KB])),'') AS KEIYAKU_KB_DISP
,M106.[ZUBAN_C]
,M106.[HINSYU_BANGO]
,M106.[RIKUKAIKU_KB]
,isnull((SELECT ITEM_DISP FROM M001_SETTING AS M001 WHERE(M001.ITEM_NAME = 'ŽÐˆõ‹æ•ª' AND M001.ITEM_VALUE = M106.[RIKUKAIKU_KB])),'') AS RIKUKAIKU_KB_DISP
,M106.[TANKA]
,M106.[TACHIAI_FLG]
,isnull(M107.KISYU_ID,0) AS KISYU_ID
,(SELECT KISYU_NAME FROM M105_KISYU AS M105 WHERE(M105.KISYU_ID = M107.[KISYU_ID])) AS KISYU_NAME
,M106.[COLOR_CD]
,M106.[ADD_YMDHNS]
,M106.[ADD_SYAIN_ID]
,isnull((SELECT SIMEI FROM M004_SYAIN AS M WHERE(M106.ADD_SYAIN_ID = M.SYAIN_ID)),'') AS ADD_SYAIN_NAME
,M106.[UPD_YMDHNS]
,M106.[UPD_SYAIN_ID]
,isnull((SELECT SIMEI FROM M004_SYAIN AS M WHERE(M106.UPD_SYAIN_ID = M.SYAIN_ID)),'') AS UPD_SYAIN_NAME
,M106.[DEL_YMDHNS]
,M106.[DEL_SYAIN_ID]
,(SELECT SIMEI FROM M004_SYAIN AS M WHERE(M106.DEL_SYAIN_ID = M.SYAIN_ID)) AS DEL_SYAIN_NAME
, (CASE RTRIM(M106.DEL_YMDHNS) WHEN '' THEN '0' ELSE '1' END) AS DEL_FLG
FROM  M106_BUHIN AS M106 LEFT OUTER JOIN
      M107_BUHIN_KISYU AS M107 ON M106.BUHIN_BANGO	= M107.BUHIN_BANGO AND 
                                  M106.TOKUI_ID		= M107.TOKUI_ID AND 
                                  M106.BUMON_KB		= M107.BUMON_KB  
GO


